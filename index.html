<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Prim Hesaplama</title>
<style>
:root{
  --primary:#1976d2;
  --bg:#f4f4f4;
  --card:#ffffff;
  --text:#333;
}
[data-theme="dark"]{
  --bg:#121212;
  --card:#1e1e1e;
  --text:#eee;
  --primary:#2196f3;
}
/* Koyu tema bilgi kutusu yazÄ±sÄ±nÄ± gÃ¶rÃ¼nÃ¼r yap */
[data-theme="dark"] .info-box{
  background:#1a237e; /* koyu mavi arka plan */
  color:#fff; /* beyaz yazÄ± */
}

html,body{height:100%;margin:0;font-family:sans-serif;background:var(--bg);color:var(--text);}
body{display:flex;justify-content:center;padding:16px;align-items:flex-start;}
.wrap{
  width:100%;
  max-width:480px;
  background:var(--card);
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:16px;
}
label{display:block;margin-top:12px;font-weight:600;font-size:14px;}
select,input[type="number"],input[type="text"],input[type="password"]{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:14px;
  box-sizing:border-box;
  background:var(--card);
  color:var(--text);
}
.kredi-row{display:flex;align-items:center;gap:10px;margin-top:10px;}
.kredi-row input[type="checkbox"]{width:18px;height:18px;}
.actions{display:flex;gap:10px;margin-top:16px;}
button{
  flex:1;
  padding:12px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  font-weight:700;
  color:white;
  font-size:14px;
}
.btn-calc{background:var(--primary);}
.btn-clear{background:#ccc;color:#333;}
.result{
  background:var(--card);
  border-radius:8px;
  padding:16px;
  border:1px solid #ddd;
}
.result h3{margin:0 0 8px 0;font-size:16px;}
.line{display:flex;justify-content:space-between;margin:6px 0;font-size:14px;}
.muted{color:#666;font-weight:600;}
.big{font-size:18px;font-weight:800;}
.by{text-align:right;color:#999;font-weight:600;font-size:12px;margin-top:6px;}
.hidden{display:none;}
.info-box{background:#eef; padding:10px;border-radius:6px; font-size:14px;margin-top:10px;}
.theme-switch{margin-top:10px;text-align:right;}
.footer-credit{
  text-align:center;
  font-weight:700;
  font-size:14px;
  margin-top:10px;
  color: #d32f2f; /* kÄ±rmÄ±zÄ± renkli */
}
</style>
</head>
<body data-theme="light">

<!-- GiriÅŸ EkranÄ± -->
<div class="wrap" id="loginWrap">
  <h1>GiriÅŸ Yap</h1>
  <label for="userId">KullanÄ±cÄ± AdÄ±</label>
  <input type="text" id="userId" placeholder="KullanÄ±cÄ± adÄ±">
  <label for="userPass">Åifre</label>
  <input type="password" id="userPass" placeholder="Åifre">
  <div style="margin-top:8px;">
    <input type="checkbox" id="rememberMe">
    <label for="rememberMe" style="font-weight:400;font-size:14px;">Beni hatÄ±rla</label>
  </div>
  <div class="actions">
    <button id="btnLogin" class="btn-calc">GÄ°RÄ°Å</button>
  </div>
</div>

<!-- Prim Hesaplama EkranÄ± -->
<div class="wrap hidden" id="primWrap">

  <h1>Prim Hesaplama</h1>

  <!-- Tema SeÃ§imi -->
  <div class="theme-switch">
    <label>ğŸŒ— Tema: </label>
    <select id="themeSelect">
      <option value="light">AÃ§Ä±k Mavi</option>
      <option value="dark">Koyu</option>
    </select>
  </div>

  <label for="urun">ÃœRÃœN SEÃ‡Ä°N</label>
  <select id="urun"></select>

  <label for="satis">SATIÅ ÅEKLÄ° SEÃ‡Ä°N</label>
  <select id="satis"></select>

  <div class="kredi-row">
    <input type="checkbox" id="checkKredi">
    <label for="checkKredi">Kredi KartÄ± SeÃ§eneÄŸi</label>
    <select id="krediOpt" disabled style="flex:1;"></select>
  </div>

  <label for="toplam">TOPLAM SATIÅ TUTARI (â‚º)</label>
  <input id="toplam" type="number" step="0.01" disabled>

  <label for="nakit">NAKÄ°T TUTARI (â‚º)</label>
  <input id="nakit" type="number" step="0.01" placeholder="Nakit tutarÄ±nÄ± girin">

  <label for="senet">SENET TUTARI (â‚º) â€” otomatik</label>
  <input id="senet" type="number" step="0.01" disabled>

  <label for="hesaba">HESABA DÃœÅEN (â‚º) â€” (kredi kartÄ± iÃ§in)</label>
  <input id="hesaba" type="number" step="0.01" placeholder="Kredi kartÄ± iÃ§in" disabled>

  <div style="display:flex;gap:10px;margin-top:10px;">
    <button id="btnHesapla" class="btn-calc">HESAPLA</button>
    <button id="btnTemizle" class="btn-clear">TEMÄ°ZLE</button>
    <button id="btnResetAll" class="btn-clear">HIZLI SIFIRLA</button>
  </div>

  <!-- YardÄ±m / Bilgi -->
  <button id="btnInfo" class="btn-clear" style="margin-top:10px;">Prim Hesaplama AÃ§Ä±klamasÄ±</button>
  <div id="infoBox" class="info-box hidden">
    Nakit tutarÄ± KDV dahil 1,20 oranÄ±yla bÃ¶lÃ¼nÃ¼r ve %21 prim alÄ±nÄ±r. Senet tutarÄ± (Kredi KartÄ± seÃ§ili deÄŸilse) Ã¼rÃ¼n ve satÄ±ÅŸ ÅŸekline gÃ¶re %17-%11 oranlarÄ±nda prim hesaplanÄ±r. Kredi KartÄ± iÃ§in hesaba dÃ¼ÅŸen tutarÄ±n %21â€™i prim olarak eklenir. Toplam prim tÃ¼m primlerin toplamÄ±dÄ±r.
  </div>

  <div class="result">
    <h3>Hesap SonuÃ§larÄ±</h3>
    <div class="line"><div class="muted">Toplam SatÄ±ÅŸ</div><div id="rToplam" class="muted">â‚º0,00</div></div>
    <div class="line"><div class="muted">Nakit (KDV'li)</div><div id="rNakitKdv">â‚º0,00</div></div>
    <div class="line"><div class="muted">Senet (KDV'li)</div><div id="rSenetKdv">â‚º0,00</div></div>
    <div class="line"><div class="muted">Nakit Prim</div><div id="rNakitPrim">â‚º0,00</div></div>
    <div class="line"><div class="muted">Senet Prim</div><div id="rSenetPrim">â‚º0,00</div></div>
    <div class="line"><div class="muted">Kredi KartÄ± Primi</div><div id="rKrediPrim">â‚º0,00</div></div>
    <div class="line"><div class="muted">Toplam Prim</div><div id="rTopPrim" class="big">â‚º0,00</div></div>
  </div>

  <div class="by">by_OÄŸuz</div>
  <div class="footer-credit">BÄ°R KAHRAMANMARAÅ YAPIMIDIR</div>
</div>

<script>
// --- GiriÅŸ Kontrol ve Beni HatÄ±rla ---
const loginWrap = document.getElementById('loginWrap');
const primWrap = document.getElementById('primWrap');
const btnLogin = document.getElementById('btnLogin');

window.addEventListener('DOMContentLoaded',()=>{
  const savedId = localStorage.getItem('savedUser');
  const savedPass = localStorage.getItem('savedPass');
  if(savedId && savedPass){
    document.getElementById('userId').value = savedId;
    document.getElementById('userPass').value = savedPass;
    document.getElementById('rememberMe').checked = true;
  }
});

btnLogin.addEventListener('click',()=>{
  const id = document.getElementById('userId').value.trim();
  const pass = document.getElementById('userPass').value.trim();
  const remember = document.getElementById('rememberMe').checked;

  if(id==='ihlas' && pass==='1234'){
    if(remember){
      localStorage.setItem('savedUser', id);
      localStorage.setItem('savedPass', pass);
    } else {
      localStorage.removeItem('savedUser');
      localStorage.removeItem('savedPass');
    }
    loginWrap.classList.add('hidden');
    primWrap.classList.remove('hidden');
  } else {
    alert('KullanÄ±cÄ± adÄ± veya ÅŸifre yanlÄ±ÅŸ!');
  }
});

// --- Tema SeÃ§imi ---
const themeSelect = document.getElementById('themeSelect');
themeSelect.addEventListener('change',()=>{ document.body.setAttribute('data-theme', themeSelect.value); });

// --- YardÄ±m / Bilgi Toggle ---
const btnInfo = document.getElementById('btnInfo');
const infoBox = document.getElementById('infoBox');
btnInfo.addEventListener('click',()=>{ infoBox.classList.toggle('hidden'); });

// --- HÄ±zlÄ± SÄ±fÄ±rla ---
const btnResetAll = document.getElementById('btnResetAll');

// --- Prim Hesaplama ElemanlarÄ± ---
const urunEl=document.getElementById('urun'),
      satisEl=document.getElementById('satis'),
      toplamEl=document.getElementById('toplam'),
      nakitEl=document.getElementById('nakit'),
      senetEl=document.getElementById('senet'),
      checkKredi=document.getElementById('checkKredi'),
      krediOpt=document.getElementById('krediOpt'),
      hesabaEl=document.getElementById('hesaba');

const rToplam=document.getElementById('rToplam'),
      rNakitKdv=document.getElementById('rNakitKdv'),
      rSenetKdv=document.getElementById('rSenetKdv'),
      rNakitPrim=document.getElementById('rNakitPrim'),
      rSenetPrim=document.getElementById('rSenetPrim'),
      rKrediPrim=document.getElementById('rKrediPrim'),
      rTopPrim=document.getElementById('rTopPrim');

const btnHesapla=document.getElementById('btnHesapla'),
      btnTemizle=document.getElementById('btnTemizle');

btnResetAll.addEventListener('click',()=>{
  toplamEl.value=''; nakitEl.value=''; senetEl.value=''; hesabaEl.value='';
  checkKredi.checked=false; krediOpt.disabled=true; hesabaEl.disabled=true;
  renderResultsReset();
});

// --- TL Format Fonksiyonu ---
function tl(v){return 'â‚º'+Number(v||0).toLocaleString('tr-TR',{minimumFractionDigits:2,maximumFractionDigits:2})}

// --- SatÄ±ÅŸ Verisi ---
const satisMap = {
  "TR":{"1+1":63000,"1+5":70000,"1+8":75000,"1+12":80000,"1+15":84000,"1+18":90000,"1+21":96000,"1+24":102000,"K.KARTI TEK Ã‡EKÄ°M":60000,"K.KARTI 2 TAKSÄ°T":63000,"K.KARTI 5 TAKSÄ°T":65000,"K.KARTI 9 TAKSÄ°T":70000},
  "RO - Unique":{"1+1":24000,"1+4":26000,"1+7":28000,"1+12":30000,"1+15":32000,"1+18":34000,"1+21":35000,"K.KARTI TEK Ã‡EKÄ°M":23000,"K.KARTI 2 TAKSÄ°T":24000,"K.KARTI 5 TAKSÄ°T":25000,"K.KARTI 9 TAKSÄ°T":28000},
  "RO - Unique M5":{"1+1":24500,"1+4":27000,"1+7":29000,"1+12":31000,"1+15":33000,"1+18":35000,"1+21":36000,"K.KARTI TEK Ã‡EKÄ°M":23500,"K.KARTI 2 TAKSÄ°T":24500,"K.KARTI 5 TAKSÄ°T":26000,"K.KARTI 9 TAKSÄ°T":29000},
  "RO - Platinum":{"1+1":15000,"1+4":17000,"1+7":18000,"1+12":20000,"1+15":21000,"K.KARTI TEK Ã‡EKÄ°M":15000,"K.KARTI 2 TAKSÄ°T":15500,"K.KARTI 9 TAKSÄ°T":18500},
  "RO - Silver":{"1+1":6200,"1+4":6700,"1+7":7200,"1+12":7700,"1+15":8200,"K.KARTI TEK Ã‡EKÄ°M":5900,"K.KARTI 2 TAKSÄ°T":6200,"K.KARTI 9 TAKSÄ°T":7000},
  "Klima-12":{"1+4":31000,"1+9":36000,"1+12":37500,"K.KARTI TEK Ã‡EKÄ°M":27900,"K.KARTI 9 TAKSÄ°T":31000},
  "Klima-18":{"1+4":43500,"1+9":50500,"1+12":55000,"K.KARTI TEK Ã‡EKÄ°M":38500,"K.KARTI 9 TAKSÄ°T":43500}
};

// --- Fonksiyonlar ve Eventler ---
function populateUrunler(){
  urunEl.innerHTML='';
  for(const u of Object.keys(satisMap)){
    const opt=document.createElement('option');
    opt.value=u;
    opt.textContent=u;
    urunEl.appendChild(opt);
  }
}

function updateSatisOptions(){
  const u = urunEl.value;
  satisEl.innerHTML='';
  if(!satisMap[u]) return;
  const keys=Object.keys(satisMap[u]).filter(k=>!k.includes('K.KARTI'));
  keys.forEach(k=>{
    const opt=document.createElement('option');
    opt.value=k;
    opt.textContent=k;
    satisEl.appendChild(opt);
  });
  satisEl.selectedIndex=0;
  toplamEl.value = keys[0] ? satisMap[u][keys[0]] : 0;
  updateSenet();
  renderResultsReset();
}

function updateKrediOptions(){
  const u = urunEl.value;
  krediOpt.innerHTML='';
  const krediKeys = Object.keys(satisMap[u]||{}).filter(k=>k.includes('K.KARTI'));
  krediKeys.forEach(k=>{
    const opt=document.createElement('option');
    opt.value=k; opt.textContent=k; krediOpt.appendChild(opt);
  });
}

function updateSenet(){
  const toplam=parseFloat(toplamEl.value)||0;
  const nakit=parseFloat(nakitEl.value)||0;
  const senet=Math.max(toplam-nakit,0);
  senetEl.value=senet.toFixed(2);
}

function renderResultsReset(){
  rToplam.textContent=tl(0);
  rNakitKdv.textContent=tl(0);
  rSenetKdv.textContent=tl(0);
  rNakitPrim.textContent=tl(0);
  rSenetPrim.textContent=tl(0);
  rKrediPrim.textContent=tl(0);
  rTopPrim.textContent=tl(0);
}

function hesapla(){
  const toplam = parseFloat(toplamEl.value) || 0;
  const nakit = parseFloat(nakitEl.value) || 0;
  const senet = Math.max(toplam - nakit, 0);
  const hesaba = parseFloat(hesabaEl.value) || 0;

  const kdvFactor = 1.20;
  const nakitKdv = nakit / kdvFactor;
  const nakitPrim = nakitKdv * 0.21;

  const krediSecili = checkKredi.checked;

  let senetPrim = 0;
  let senetKdv = 0;
  if (!krediSecili) {
    const satisKey = satisEl.value || "";
    const satisNum = parseInt(satisKey.split("+")[1]) || 0;
    const urun = urunEl.value;
    let senetOran = 0.17;
    if (urun === "TR") senetOran = (satisNum > 12) ? 0.11 : 0.17;
    else if (urun === "RO - Unique" || urun === "RO - Unique M5") senetOran = (satisNum > 7) ? 0.11 : 0.17;
    else if (urun === "RO - Platinum" || urun === "RO - Silver") senetOran = 0.11;
    else if (urun === "Klima-12" || urun === "Klima-18") senetOran = 0.09;

    senetKdv = senet / kdvFactor;
    senetPrim = senetKdv * senetOran;
  }

  const krediPrim = krediSecili ? (hesaba / kdvFactor) * 0.21 : 0;
  const toplamPrim = nakitPrim + senetPrim + krediPrim;

  rToplam.textContent = tl(toplam);
  rNakitKdv.textContent = tl(nakitKdv);
  rSenetKdv.textContent = tl(senetKdv);
  rNakitPrim.textContent = tl(nakitPrim);
  rSenetPrim.textContent = tl(senetPrim);
  rKrediPrim.textContent = tl(krediPrim);
  rTopPrim.textContent = tl(toplamPrim);
}

// --- Event Listeners ---
urunEl.addEventListener('change',()=>{updateSatisOptions();updateKrediOptions()});
satisEl.addEventListener('change',()=>{toplamEl.value = (satisMap[urunEl.value][satisEl.value]||0); updateSenet(); renderResultsReset()});
nakitEl.addEventListener('input',()=>{updateSenet(); renderResultsReset()});
btnHesapla.addEventListener('click',()=>{if(checkKredi.checked){hesabaEl.disabled=false;krediOpt.disabled=false} hesapla()});
btnTemizle.addEventListener('click',()=>{urunEl.selectedIndex=0; populateUrunler(); updateSatisOptions(); nakitEl.value=''; senetEl.value=''; hesabaEl.value=''; checkKredi.checked=false; krediOpt.disabled=true; hesabaEl.disabled=true; renderResultsReset();});
checkKredi.addEventListener('change',()=>{ const on=checkKredi.checked; satisEl.disabled=on; nakitEl.disabled=on; senetEl.disabled=on; hesabaEl.disabled=!on; krediOpt.disabled=!on; if(on){ const u=urunEl.value; const k=krediOpt.value||"K.KARTI TEK Ã‡EKÄ°M"; const fiyat=(satisMap[u]&&satisMap[u][k])?satisMap[u][k]:0; toplamEl.value=fiyat; nakitEl.value=''; senetEl.value=''; } else { const u=urunEl.value; const s=satisEl.value; if(u&&s&&satisMap[u]&&satisMap[u][s]!==undefined){toplamEl.value=satisMap[u][s]} hesabaEl.value=''; } renderResultsReset(); });
krediOpt.addEventListener('change',()=>{ if(checkKredi.checked){ const u=urunEl.value; const k=krediOpt.value; const fiyat=(satisMap[u]&&satisMap[u][k])?satisMap[u][k]:0; toplamEl.value=fiyat; nakitEl.value=''; senetEl.value=''; renderResultsReset(); } });

// --- Init ---
populateUrunler();
updateSatisOptions();
updateKrediOptions();
renderResultsReset();
</script>
</body>
</html>
